# The minimalistic usage for all test environments:
#   pip install tox
#   tox
# This configuration file needs versions `tox 1.6.1+`, `pip 1.4+` or higher
[tox]
minversion = 1.6.1
envlist = py26dj14, py27dj14, py27dj15, py27dj16, py27dj17, py33dj15
[testenv]
basepython = python2.7
deps =
    setuptools_git>=0.4.2
whitelist_externals = rm
commands =
    # The automatically created 'django_salesforce.egg-info/SOURCES.txt' was a big problem
    # because absolute paths would usually break the next installation.
    rm -rf ./django_salesforce.egg-info
    {envbindir}/pip install -r requirements.txt
    # forced rebuild because the source can be for different Python 2 or 3
    #{envpython} setup.py build
    {envpython} manage-tox.py test salesforce
[testenv:py26dj14]
basepython = python2.6
deps =
    {[testenv]deps}
    Django==1.4.7
[testenv:py27dj14]
deps =
    {[testenv]deps}
    Django==1.4.7
[testenv:py27dj15]
deps =
    {[testenv]deps}
    Django==1.5.5
[testenv:py27dj16]
deps =
    {[testenv]deps}
    Django==1.6.2
[testenv:py27dj17]
deps =
    {[testenv]deps}
    https://www.djangoproject.com/download/1.7a2/tarball/
[testenv:py33dj15]
basepython = python3.3
deps =
    {[testenv]deps}
    Django==1.5.5
commands =
    {envbindir}/pip install -r requirements.txt
    {envpython} setup.py build --build-base=build3
    {envpython} manage-tox.py test salesforce
